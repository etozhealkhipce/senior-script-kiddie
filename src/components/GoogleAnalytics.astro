---
const gaId = "G-1B7Q55BVCM";
const isProd = import.meta.env.PROD;
---

{isProd && (
  <script is:inline src={`https://www.googletagmanager.com/gtag/js?id=${gaId}`}></script>
  <script define:vars={{ gaId }}>
    document.addEventListener("astro:page-load", () => {
      window.dataLayer = window.dataLayer || [];
      window.gtag = function gtag() {
        window.dataLayer.push(arguments);
      };
      window.gtag("js", new Date());
      window.gtag("consent", "default", {
        ad_storage: "denied",
        ad_user_data: "denied",
        ad_personalization: "denied",
        analytics_storage: "denied",
      });
      window.gtag("config", gaId);
    });
  </script>
)}
